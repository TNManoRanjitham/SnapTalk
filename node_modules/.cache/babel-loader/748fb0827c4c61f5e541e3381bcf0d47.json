{"ast":null,"code":"var _jsxFileName = \"/Users/thirumano/Documents/SnapTalk/frontend/src/contexts/SocketContext.tsx\";\nimport React, { createContext, useState, useEffect } from 'react';\nimport io from 'socket.io-client';\nconst useQuery = () => new URLSearchParams(window.location.search);\nconst userId = useQuery().get('userId') || ''; // Get userId from the query string, default to '' if not present\n\nconst socket = io('http://localhost:3000', {\n  query: {\n    userId\n  }\n}); // Backend server URL\n\nexport const SocketContext = createContext(undefined);\nexport const SocketProvider = ({\n  children\n}) => {\n  const [messages, setMessages] = useState([]);\n  useEffect(() => {\n    socket.on('receive_message', message => {\n      setMessages(prevMessages => [...prevMessages, message]);\n    });\n    return () => {\n      socket.off('receive_message');\n    };\n  }, []);\n  const sendMessage = (message, recipient) => {\n    socket.emit('send_message', {\n      content: message,\n      sender: userId,\n      recipient\n    });\n  };\n  return /*#__PURE__*/React.createElement(SocketContext.Provider, {\n    value: {\n      sendMessage,\n      messages,\n      userId\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, children);\n};","map":{"version":3,"names":["React","createContext","useState","useEffect","io","useQuery","URLSearchParams","window","location","search","userId","get","socket","query","SocketContext","undefined","SocketProvider","children","messages","setMessages","on","message","prevMessages","off","sendMessage","recipient","emit","content","sender","createElement","Provider","value","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/Users/thirumano/Documents/SnapTalk/frontend/src/contexts/SocketContext.tsx"],"sourcesContent":["import React, { createContext, useState, useEffect, ReactNode } from 'react';\nimport io from 'socket.io-client';\n\nconst useQuery = () => new URLSearchParams(window.location.search);\nconst userId = useQuery().get('userId') || ''; // Get userId from the query string, default to '' if not present\n\n\nconst socket = io('http://localhost:3000', { query: { userId } }); // Backend server URL\n\ninterface SocketContextProps {\n  sendMessage: (message: string, recipient: string) => void;\n  messages: string[];\n  userId: string;\n}\n\ninterface SocketProviderProps {\n  children: ReactNode;\n}\n\ninterface Message {\n  text: string;\n  sender: string;\n  recipient: string;\n  timestamp: string;\n}\n\nexport const SocketContext = createContext<SocketContextProps | undefined>(undefined);\n\nexport const SocketProvider: React.FC<SocketProviderProps> = ({ children }) => {\n  const [messages, setMessages] = useState<[]>([]);\n\n  useEffect(() => {\n    socket.on('receive_message', ( message : { text: string, sender: string, recipient: string, timestamp: string }) => {\n      setMessages((prevMessages) => [...prevMessages, message]);\n    });\n\n    return () => {\n      socket.off('receive_message');\n    };\n  }, []);\n\n  const sendMessage = (message: string,  recipient: string) => {\n    socket.emit('send_message', { content: message, sender: userId, recipient });\n  };\n\n  return (\n    <SocketContext.Provider value={{ sendMessage, messages, userId }}>\n      {children}\n    </SocketContext.Provider>\n  );\n};\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,QAAmB,OAAO;AAC5E,OAAOC,EAAE,MAAM,kBAAkB;AAEjC,MAAMC,QAAQ,GAAGA,CAAA,KAAM,IAAIC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC;AAClE,MAAMC,MAAM,GAAGL,QAAQ,CAAC,CAAC,CAACM,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;;AAG/C,MAAMC,MAAM,GAAGR,EAAE,CAAC,uBAAuB,EAAE;EAAES,KAAK,EAAE;IAAEH;EAAO;AAAE,CAAC,CAAC,CAAC,CAAC;;AAmBnE,OAAO,MAAMI,aAAa,GAAGb,aAAa,CAAiCc,SAAS,CAAC;AAErF,OAAO,MAAMC,cAA6C,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAC7E,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGjB,QAAQ,CAAK,EAAE,CAAC;EAEhDC,SAAS,CAAC,MAAM;IACdS,MAAM,CAACQ,EAAE,CAAC,iBAAiB,EAAIC,OAAgF,IAAK;MAClHF,WAAW,CAAEG,YAAY,IAAK,CAAC,GAAGA,YAAY,EAAED,OAAO,CAAC,CAAC;IAC3D,CAAC,CAAC;IAEF,OAAO,MAAM;MACXT,MAAM,CAACW,GAAG,CAAC,iBAAiB,CAAC;IAC/B,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,WAAW,GAAGA,CAACH,OAAe,EAAGI,SAAiB,KAAK;IAC3Db,MAAM,CAACc,IAAI,CAAC,cAAc,EAAE;MAAEC,OAAO,EAAEN,OAAO;MAAEO,MAAM,EAAElB,MAAM;MAAEe;IAAU,CAAC,CAAC;EAC9E,CAAC;EAED,oBACEzB,KAAA,CAAA6B,aAAA,CAACf,aAAa,CAACgB,QAAQ;IAACC,KAAK,EAAE;MAAEP,WAAW;MAAEN,QAAQ;MAAER;IAAO,CAAE;IAAAsB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC9DpB,QACqB,CAAC;AAE7B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}